ollama_url: "http://127.0.0.1:11434"

embed_model: "nomic-embed-text"

chat_model: "qwen3-puppet"

db_path: "./rag.sqlite"


chunk_size: 1200
chunk_overlap: 200

top_k: 6
min_sim: 0.18

sources:
  - type: git
    name: "vendor:puppetlabs:best-practices"
    url: "https://github.com/puppetlabs/best-practices.git"
    dest: "./sources/vendor/puppetlabs/best-practices"
    glob: "**/*.md"

  # - type: dir
  #   name: "internal:control-repo"
  #   path: "/srv/puppet/control-repo"
  #   glob: "**/*.{pp,epp,md,yaml,yml,json}"

  # - type: dir
  #   name: "internal:modules"
  #   path: "/srv/puppet/modules"
  #   glob: "**/*.{pp,epp,md}"

  - type: forge_discover
    name: "forge:public:auto"
    api_base: "https://forgeapi.puppet.com"
    dest: "./sources/forge/public"

    include_globs:
      - "**/*.md"
      - "**/*.pp"
      - "**/*.epp"
      - "metadata.json"
      - "REFERENCE.md"
      - "README*"

    # Pagination / throttling
    limit_per_page: 50
    request_delay_sec: 0.5          # slower = safer
    download_delay_sec: 1.0         # add pause after each download/clone

    # Hard caps per run (VERY important)
    max_modules_seen: 100           # how many modules to *scan* per run (API pages)
    max_modules_synced: 20          # how many modules to actually download/clone per run

    # Filters
    only_owner: "puppetlabs"        # safest start
    only_with_repo: true            # clone only, no tarball fallback
    # allowlist: ["puppetlabs-stdlib", "puppetlabs-apt"]   # optional
    # denylist: ["someowner-somemodule"]                   # optional
